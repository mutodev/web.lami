<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent">

    <!-- Header -->
    <div
        class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-8 px-6 md:px-8 border-b">
        <!-- Loader
        <div class="absolute inset-x-0 bottom-0" *ngIf="isLoading">
            <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
        </div> -->
        <!-- Title -->
        <div class="text-4xl font-extrabold tracking-tight">Barrios</div>
        <!-- Actions -->
        <div class="flex sm:flex-row shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
     <!-- Search -->
          <div  [formGroup]="SearchformGroup">
          <mat-form-field class="fuse-mat-dense fuse-mat-no-subscript min-w-80 fuse-mat-rounded">
              <mat-icon matPrefix [svgIcon]="'heroicons_outline:search'"></mat-icon>
              <input matInput formControlName="search" [autocomplete]="'off'"
                  [placeholder]="'Buscar Barrio'">
          </mat-form-field>
        </div>

        </div>
    </div>

    <!-- Main -->
    <div class="flex flex-auto overflow-hidden">

        <!-- Products list -->
        <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">



            <div
            class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between px-3 pb-5 pt-3 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent"    style="
            margin-bottom: 2%;
        ">


            <div>


            <input type="file" class="upload" (change)="changeListener($event.target.files)"> </div>
            <div>
                  <!-- Add product button -->
                  <button  (click)="saveDatafromCSV()" class="ml-4 sm:rounded-full" mat-flat-button [color]="'primary'"
                 >
                  <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                  <span class="ml-2 mr-1 hidden md:flex">Cargar Barrios</span>
              </button>
          </div>




        </div>

        <div
        class="">

        <div [formGroup]="formGroup"   class="sm:flex-row flex-0 sm:items-center sm:justify-between px-3 pb-5 pt-3 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">

<!---Campos-->

<div class="">
    <!-- estate-->
    <div class="sm:col-span-5">
        <mat-form-field floatLabel="auto"class="flex-auto w-full fuse-mat-dense">
            <mat-label >Departamento</mat-label>
            <search-mat-select  id="state"  required [placeholder]="'Seleccionar el departamento'"
                [dataSource]="STATES" [filterColumns]="['name']" selectedValue="code" [selectedText]="'name'"
                formControlName="state">
            </search-mat-select>

            <mat-error *ngIf="formGroup.get('state').hasError('required')  && formGroup.get('state').touched">
                El departamento es requerido.
            </mat-error>
        </mat-form-field>
        </div>
    <!-- city-->
    <div class="sm:col-span-5">
        <mat-form-field floatLabel="auto"class="flex-auto w-full fuse-mat-dense">
            <mat-label >Ciudad</mat-label>
            <search-mat-select  id="city"  required [placeholder]="'Seleccionar ciudad'"
                [dataSource]="CITIES" [filterColumns]="['name']" selectedValue="code" [selectedText]="'name'"
                formControlName="city">
            </search-mat-select>

            <mat-error *ngIf="formGroup.get('city').hasError('required')  && formGroup.get('city').touched">
                El departamento es requerido.
            </mat-error>
        </mat-form-field>
        </div>
                       <!-- name -->
    <div class="sm:col-span-5">
        <mat-form-field class="fuse-mat-dense  fuse-mat-emphasized-affix w-full">
            <mat-label>Nombre del Barrio</mat-label>
            <input  required  [formControlName]="'name'" matInput>

            <mat-error *ngIf="formGroup.get('name').hasError('required')  && formGroup.get('name').touched">
                El Nombre del barrio es requerido.
            </mat-error>
        </mat-form-field>
        </div>





            </div>


<!--guardar-->

<div class="r">
    <button type="button" [disabled]="disabledForm" (click)="save()" [color]="'primary'" mat-flat-button>
        <mat-icon class="icon-size-5 mr-2" [svgIcon]="'heroicons_solid:check'"></mat-icon>
        <span>
           Agregar Barrio
        </span>
    </button>  </div>

        </div>
        </div>


            <ng-container *ngIf="barrios.length > 0">
                <div class="grid">


                    <div
                    class="inventory-grid z-10 sticky top-0 flex gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5">
                    <div >
                      Borrar
                      </div>
                    <div class="truncate hidden md:block" >
                       Departamento
                    </div>
                    <div class="col-soan-2" >
                       Ciudad
                     </div>
                     <div >
                       Barrio
                     </div>

                </div>


                    <ng-container *ngFor="let barrio of barrios">
                        <div class="flex items-center gap-4 py-3 px-6 md:px-8 border-b">

                            <div class="truncate">
                                <button (click)="removeItemRowBtn(barrio.id)" mat-button>
                                    <mat-icon class="text-gray-400 icon-size-5" [svgIcon]="'heroicons_solid:trash'">
                                    </mat-icon>
                                </button>
                            </div>
                            <!-- store -->
                            <div class="truncate hidden md:block">
                                {{barrio.state}}
                            </div>
                            <div class="truncate">
                                {{barrio.city
                                }}
                            </div>
                            <div class="truncate">
                                {{barrio.name

                                }}
                            </div>

                        </div>
                        </ng-container>



                </div>
            </ng-container>

        </div>

    </div>

</div>
